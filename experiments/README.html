<!doctype html>
<html>
<head>
<meta charset="utf-8">
<style>
h1,
h2,
h3,
h4,
h5,
h6,
p,
blockquote {
    margin: 0;
    padding: 0;
}
body {
    font-family: "Helvetica Neue", Helvetica, "Hiragino Sans GB", Arial, sans-serif;
    font-size: 13px;
    line-height: 18px;
    color: #737373;
    margin: 10px 13px 10px 13px;
}
a {
    color: #0069d6;
}
a:hover {
    color: #0050a3;
    text-decoration: none;
}
a img {
    border: none;
}
p {
    margin-bottom: 9px;
}
h1,
h2,
h3,
h4,
h5,
h6 {
    color: #404040;
    line-height: 36px;
}
h1 {
    margin-bottom: 18px;
    font-size: 30px;
}
h2 {
    font-size: 24px;
}
h3 {
    font-size: 18px;
}
h4 {
    font-size: 16px;
}
h5 {
    font-size: 14px;
}
h6 {
    font-size: 13px;
}
hr {
    margin: 0 0 19px;
    border: 0;
    border-bottom: 1px solid #ccc;
}
blockquote {
    padding: 13px 13px 21px 15px;
    margin-bottom: 18px;
    font-family:georgia,serif;
    font-style: italic;
}
blockquote:before {
    content:"\201C";
    font-size:40px;
    margin-left:-10px;
    font-family:georgia,serif;
    color:#eee;
}
blockquote p {
    font-size: 14px;
    font-weight: 300;
    line-height: 18px;
    margin-bottom: 0;
    font-style: italic;
}
code, pre {
    font-family: Monaco, Andale Mono, Courier New, monospace;
}
code {
    background-color: #fee9cc;
    color: rgba(0, 0, 0, 0.75);
    padding: 1px 3px;
    font-size: 12px;
    -webkit-border-radius: 3px;
    -moz-border-radius: 3px;
    border-radius: 3px;
}
pre {
    display: block;
    padding: 14px;
    margin: 0 0 18px;
    line-height: 16px;
    font-size: 11px;
    border: 1px solid #d9d9d9;
    white-space: pre-wrap;
    word-wrap: break-word;
}
pre code {
    background-color: #fff;
    color:#737373;
    font-size: 11px;
    padding: 0;
}
@media screen and (min-width: 768px) {
    body {
        width: 748px;
        margin:10px auto;
    }
}
</style>
<title>NuraniLibrary Data Experiments</title>
</head>
<body>
<h1>NuraniLibrary Data Experiments</h1>

<h2>0. UI Ideas</h2>

<p>The SWORD project(s) have been coming up with UI to handle this data for several decades, it is worth checking them out.  The <a href="http://www.macsword.com/tour/">MacSWORD project</a> has a fairly good UI.</p>

<p>See: http://www.eloquent-bible-study.eu/macsword2/screenshots/MS2_ParallelWithCommentariesAndHebrew.png</p>

<h2>1. Data Formats</h2>

<p><strong>Problem:</strong> <em>Find the most useful data formats for NuraniLibrary to support.</em></p>

<p>It seems nearly every textual document on the web is using its own format.</p>

<h3>1.1 Format A</h3>

<p>The <a href="http://www.sblgnt.com/">SBL Greek New Testament</a> uses an unknown format.  Here is what it looks like:</p>

<pre><code>010101 N- ----NSF- Βίβλος Βίβλος βίβλος βίβλος
010101 N- ----GSF- γενέσεως γενέσεως γενέσεως γένεσις
010101 N- ----GSM- Ἰησοῦ Ἰησοῦ Ἰησοῦ Ἰησοῦς
010101 N- ----GSM- χριστοῦ χριστοῦ Χριστοῦ Χριστός
010101 N- ----GSM- υἱοῦ υἱοῦ υἱοῦ υἱός
010101 N- ----GSM- Δαυὶδ Δαυὶδ Δαυίδ Δαυίδ
010101 N- ----GSM- υἱοῦ υἱοῦ υἱοῦ υἱός
010101 N- ----GSM- Ἀβραάμ. Ἀβραάμ Ἀβραάμ Ἀβραάμ
010102 N- ----NSM- Ἀβραὰμ Ἀβραὰμ Ἀβραάμ Ἀβραάμ
010102 V- 3AAI-S-- ἐγέννησεν ἐγέννησεν ἐγέννησε(ν) γεννάω
010102 RA ----ASM- τὸν τὸν τόν ὁ
010102 N- ----ASM- Ἰσαάκ, Ἰσαάκ Ἰσαάκ Ἰσαάκ
010102 N- ----NSM- Ἰσαὰκ Ἰσαὰκ Ἰσαάκ Ἰσαάκ
010102 C- -------- δὲ δὲ δέ δέ
010102 V- 3AAI-S-- ἐγέννησεν ἐγέννησεν ἐγέννησε(ν) γεννάω
010102 RA ----ASM- τὸν τὸν τόν ὁ
010102 N- ----ASM- Ἰακώβ, Ἰακώβ Ἰακώβ Ἰακώβ
010102 N- ----NSM- Ἰακὼβ Ἰακὼβ Ἰακώβ Ἰακώβ
010102 C- -------- δὲ δὲ δέ δέ
010102 V- 3AAI-S-- ἐγέννησεν ἐγέννησεν ἐγέννησε(ν) γεννάω
010102 RA ----ASM- τὸν τὸν τόν ὁ
010102 N- ----ASM- Ἰούδαν Ἰούδαν Ἰούδαν Ἰούδας
</code></pre>

<h3>1.1 Format B</h3>

<p>The <a href="https://github.com/morphgnt/tischendorf">Tischendorf 8th GNT with morphology and lemmatization</a> uses an unknown format, it looks like this:</p>

<pre><code>1:1 {C} Pau=loj klhto\j a)po/stoloj Xristou= )Ihsou= dia\ qelh/matoj qeou=, kai\ Swsqe/nhj o( a)delfo/j,
1:2 th=| e)kklhsi/a| tou= qeou= th=| ou)/sh| e)n Kori/nqw|, h(giasme/noij e)n Xristw=| )Ihsou=, klhtoi=j a(gi/oij, su\n  pa=sin toi=s e)pikaloume/noij to\ o)/noma tou= kuri/ou h(mw=n )Ihsou= Xristou= e)n panti\ to/pw|, au)tw=n kai\ h(mw=n:
1:3 xa/rij u(mi=n kai\ ei)rh/nh a)po\ qeou= patro\j h(mw=n kai\ kuri/ou )Ihsou= Xristou=.
1:4 {P} Eu)xaristw= tw=| qew=| mou pa/ntote peri\ u(mw=n e)pi\ th=| xa/riti tou= qeou= th=| doqei/sh| u(mi=n e)n Xristw=| )Ihsou=,
</code></pre>

<p>also some files look like this:</p>

<pre><code>1CO 1:1.1 C *PAU=LOS *PAU=LOS N-NSM 3972 *PAU=LOS ! *PAU=LOS
1CO 1:1.2 . KLHTO\S KLHTO\S A-NSM 2822 KLHTO/S ! KLHTO/S
1CO 1:1.3 . A)PO/STOLOS A)PO/STOLOS N-NSM 652 A)PO/STOLOS ! A)PO/STOLOS
1CO 1:1.4 . *XRISTOU= *XRISTOU= N-GSM 5547 *XRISTO/S ! *XRISTO/S
</code></pre>

<h3>1.1 Format C (USFM)</h3>

<p>The <a href="http://openenglishbible.org/">Open English Bible</a> uses a format called <a href="http://paratext.ubs-translations.org/about/usfm">USFM</a>.</p>

<p>USFM <a href="https://github.com/openenglishbible/Open-English-Bible/blob/master/sources/kent/usfm/01-Genesis.usfm">looks like this</a>:</p>

<pre><code>{{\id GEN
\ide UTF-8
\h Genesis
\mt2 The
\mt2 first book of Moses
\mt2 called
\mt Genesis

\ms The beginning

\q1 \c 1 \v 1 In the beginning when God created the heavens and the earth, 
\q2 \v 2 and while the earth was still unformed and chaotic, 
\q2 with darkness on the surface of the deep, 
</code></pre>

<h3>1.1 Format D (OSIS)</h3>

<p>The <a href="https://github.com/openscriptures/morphhb">Westminster Leningrad Codex (Old Testament)</a> uses the <a href="http://www.bibletechnologies.net/osisCore.2.1.1.xsd">OSIS format</a>.</p>

<p>The OSIS format <a href="https://github.com/openscriptures/morphhb/blob/master/wlc/1Chr.xml">looks like this</a>:</p>

<pre><code>&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;osis xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.bibletechnologies.net/2003/OSIS/namespace http://www.bibletechnologies.net/osisCore.2.1.1.xsd" xmlns="http://www.bibletechnologies.net/2003/OSIS/namespace"&gt;
  &lt;osisText xml:lang="he" osisIDWork="WLC"&gt;
    &lt;header&gt;
      &lt;revisionDesc resp="dt"&gt;
        &lt;date&gt;2011.01.21&lt;/date&gt;
        &lt;p&gt;Updated to WLC version 4.14.&lt;/p&gt;
      &lt;/revisionDesc&gt;
      &lt;revisionDesc resp="dt"&gt;
        &lt;date&gt;2008.08.08&lt;/date&gt;
        &lt;p&gt;Convert the Westminster Leningrad Codex files from TEI markup to OSIS book files.&lt;/p&gt;
      &lt;/revisionDesc&gt;
      &lt;work osisWork="WLC" xml:lang="he"&gt;
        &lt;title&gt;Westminster Leningrad Codex&lt;/title&gt;
        &lt;contributor role="edt"&gt;Daniel Owens&lt;/contributor&gt;
        &lt;contributor role="edt"&gt;David Troidl&lt;/contributor&gt;
        &lt;contributor role="edt"&gt;Christopher V. Kimball&lt;/contributor&gt;
        &lt;date&gt;2007.9.16&lt;/date&gt;
        &lt;identifier type="URL"&gt;http://www.tanach.us/Tanach.xml&lt;/identifier&gt;
        &lt;rights&gt;Public Domain&lt;/rights&gt;
      &lt;/work&gt;
      &lt;workPrefix path="//w/@lemma" osisWork="Strong" /&gt;
    &lt;/header&gt;
    &lt;div type="book" osisID="1Chr"&gt;
      &lt;chapter osisID="1Chr.1"&gt;
        &lt;verse osisID="1Chr.1.1"&gt;
          &lt;w lemma="121"&gt;אָדָ֥ם&lt;/w&gt;
          &lt;w lemma="8352"&gt;שֵׁ֖ת&lt;/w&gt;
          &lt;w lemma="583"&gt;אֱנֽוֹשׁ&lt;/w&gt;&lt;seg type="x-sof-pasuq"&gt;׃&lt;/seg&gt;
        &lt;/verse&gt;
        &lt;verse osisID="1Chr.1.2"&gt;
          &lt;w lemma="7018"&gt;קֵינָ֥ן&lt;/w&gt;
          &lt;w lemma="4111"&gt;מַהֲלַלְאֵ֖ל&lt;/w&gt;
          &lt;w lemma="3382"&gt;יָֽרֶד&lt;/w&gt;&lt;seg type="x-sof-pasuq"&gt;׃&lt;/seg&gt;
        &lt;/verse&gt;
      &lt;/chapter&gt;
      &lt;chapter osisID="1Chr.8"&gt;
        &lt;verse osisID="1Chr.8.1"&gt;
          &lt;w lemma="c/1144"&gt;וּ/בִ֨נְיָמִ֔ן&lt;/w&gt;
          &lt;w lemma="3205"&gt;הוֹלִ֖יד&lt;/w&gt;
          &lt;w lemma="853"&gt;אֶת&lt;/w&gt;&lt;seg type="x-maqqef"&gt;־&lt;/seg&gt;&lt;w lemma="1106 a"&gt;בֶּ֣לַע&lt;/w&gt;
          &lt;w lemma="1060"&gt;בְּכֹר֑/וֹ&lt;/w&gt;
          &lt;w lemma="788"&gt;אַשְׁבֵּל֙&lt;/w&gt;
          &lt;w lemma="d/8145"&gt;הַ/שֵּׁנִ֔י&lt;/w&gt;
          &lt;w lemma="c/315"&gt;וְ/אַחְרַ֖ח&lt;/w&gt;
          &lt;w lemma="d/7992"&gt;הַ/שְּׁלִישִֽׁי&lt;/w&gt;&lt;seg type="x-sof-pasuq"&gt;׃&lt;/seg&gt;
        &lt;/verse&gt;
      &lt;/chapter&gt;
    &lt;/div&gt;
  &lt;/osisText&gt;
&lt;/osis&gt;
</code></pre>

<h3>1.1 Format E</h3>

<p><a href="https://github.com/morphgnt/strongs-dictionary-xml">Strongs concordance</a> uses an apparently totally custom format which looks like this:</p>

<pre><code>&lt;?xml version="1.0" encoding="utf-8" standalone="yes"?&gt;
&lt;!DOCTYPE strongsdictionary [
   &lt;!ELEMENT strongsdictionary (prologue, entries) &gt;
   &lt;!ELEMENT prologue (#PCDATA) &gt;
   &lt;!ELEMENT entries (entry)+ &gt;
   &lt;!ELEMENT entry (#PCDATA|strongs|greek|pronunciation|latin|see|strongsref|strongs_def|strongs_derivation|kjv_def)* &gt;
   &lt;!ATTLIST entry strongs CDATA #REQUIRED &gt;
   &lt;!ELEMENT greek EMPTY &gt;


   &lt;!-- unicode is real Greek. translit is SBL-style transliteration. --&gt;
   &lt;!ATTLIST greek BETA CDATA #REQUIRED 
                   unicode CDATA #REQUIRED 
                   translit CDATA #REQUIRED &gt;
   &lt;!ELEMENT latin (#PCDATA) &gt;
   &lt;!ELEMENT kjv_def (#PCDATA|strongsref)* &gt;
   &lt;!ELEMENT strongs_def (#PCDATA|greek|latin|strongsref|pronunciation)* &gt;
   &lt;!ELEMENT strongs_derivation (#PCDATA|greek|latin|strongsref|pronunciation)* &gt;
   &lt;!ELEMENT pronunciation EMPTY &gt;
   &lt;!ATTLIST pronunciation strongs CDATA #REQUIRED &gt;
   &lt;!ELEMENT strongs (#PCDATA) &gt;
   &lt;!ELEMENT see EMPTY &gt;
   &lt;!ATTLIST see language CDATA #REQUIRED
                 strongs CDATA #REQUIRED &gt;
   &lt;!ELEMENT strongsref EMPTY &gt;
   &lt;!ATTLIST strongsref language CDATA #REQUIRED
                 strongs CDATA #REQUIRED &gt;
 ]&gt;

&lt;strongsdictionary&gt;
    &lt;prologue&gt;
        …PROLOGUE TEXT…
    &lt;/prologue&gt;
    &lt;entries&gt;
        &lt;entry strongs="00001"&gt;
            &lt;strongs&gt;1&lt;/strongs&gt;
            &lt;greek BETA="*A" unicode="Α" translit="A"/&gt;
            &lt;pronunciation strongs="al'-fah"/&gt;
            &lt;strongs_derivation&gt;of Hebrew origin;&lt;/strongs_derivation&gt;
            &lt;strongs_def&gt; the first letter of the alphabet; figuratively, only
             (from its use as a numeral) the first: &lt;/strongs_def&gt;
            &lt;kjv_def&gt;--Alpha.&lt;/kjv_def&gt; Often used (usually
             &lt;greek BETA="A)/N" unicode="ἄν" translit="án"/&gt;, before a vowel) also in composition (as a contraction from &lt;strongsref language="GREEK" strongs="427"/&gt;) in
             the sense of privation; so, in many words, beginning with this letter;
             occasionally in the sense of union (as a contraction of &lt;strongsref language="GREEK" strongs="260"/&gt;).
            &lt;see language="GREEK" strongs="427"/&gt;
            &lt;see language="GREEK" strongs="260"/&gt;
        &lt;/entry&gt;
        &lt;entry strongs="02244"&gt;
            &lt;strongs&gt;2244&lt;/strongs&gt;
            &lt;greek BETA="H(LIKI/A" unicode="ἡλικία" translit="hēlikía"/&gt;
            &lt;pronunciation strongs="hay-lik-ee'-ah"/&gt;
            &lt;strongs_derivation&gt;from the same as &lt;strongsref language="GREEK" strongs="2245"/&gt;;&lt;/strongs_derivation&gt;
            &lt;strongs_def&gt; maturity (in years or size)&lt;/strongs_def&gt;
            &lt;kjv_def&gt;:--age, stature.&lt;/kjv_def&gt;
            &lt;see language="GREEK" strongs="2245"/&gt;
        &lt;/entry&gt;
    &lt;/entries&gt;
&lt;/strongsdictionary&gt;
</code></pre>

<h2>2. Data Handling / Conversion</h2>

<p>Found <a href="http://code.google.com/p/osis-converters/">these Perl scripts</a> which might help for converting from USFM to OSIS.</p>

<p>There is a Javascript parsing library called <a href="https://github.com/openbibleinfo/Bible-Passage-Reference-Parser">Bible Passage Reference Parser</a> which may be useful for us.</p>
</body>
</html>